# Chrony configuration for {{ inventory_hostname }}
# Managed by Ansible - DO NOT EDIT MANUALLY
# Generated: {{ ansible_date_time.iso8601 }}

# NTP servers
{% for server in ntp_servers %}
server {{ server }} iburst
{% endfor %}

# Fallback servers
{% for server in ntp_fallback_servers %}
server {{ server }} iburst
{% endfor %}

# Record the rate at which the system clock gains/losses time
driftfile {{ chrony_driftfile }}

# Allow the system clock to be stepped in the first few updates
# if its offset is larger than threshold for specified number of updates
makestep {{ chrony_makestep_threshold }} {{ chrony_makestep_limit }}

# Enable kernel synchronization of the real-time clock (RTC)
{% if chrony_rtcsync %}
rtcsync
{% endif %}

# Get TAI-UTC offset and leap seconds from the system tz database
leapsectz right/UTC

# Serve time to local network (optional)
{% if ntp_allow_networks is defined and ntp_allow_networks | length > 0 %}
# Allow NTP client access from local network
{% for network in ntp_allow_networks %}
allow {{ network }}
{% endfor %}
{% endif %}

# Specify directory for log files
logdir {{ chrony_logdir }}

# Select which information is logged
#log measurements statistics tracking
